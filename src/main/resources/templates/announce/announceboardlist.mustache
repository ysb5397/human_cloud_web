{{> layout/header}}

<main class="flex flex-row max-w-7xl mx-auto mt-10 px-4 gap-8">
    <aside class="w-80 sticky top-10 h-screen">
        <form action="/announce/search/detail" method="get" class="space-y-6 bg-white p-6 border border-gray-200 rounded-xl shadow-sm">
            <h2 class="text-xl font-bold text-gray-900">상세 검색</h2>

            <!-- 1. 경력 여부 (라디오 버튼) -->
            <fieldset>
                <legend class="text-base font-semibold text-gray-800 mb-3">경력</legend>
                <div class="flex items-center gap-x-6">
                    <div class="flex items-center gap-x-2">
                        <input id="career-all" name="career" type="radio" value="all" checked class="h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600">
                        <label for="career-all" class="block text-sm font-medium leading-6 text-gray-900">전체</label>
                    </div>
                    <div class="flex items-center gap-x-2">
                        <input id="career-new" name="career" type="radio" value="new" class="h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600">
                        <label for="career-new" class="block text-sm font-medium leading-6 text-gray-900">신입</label>
                    </div>
                    <div class="flex items-center gap-x-2">
                        <input id="career-exp" name="career" type="radio" value="experienced" class="h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600">
                        <label for="career-exp" class="block text-sm font-medium leading-6 text-gray-900">경력</label>
                    </div>
                </div>
            </fieldset>

            <!-- 3. 기술 스택 (아코디언 UI) -->
            <fieldset x-data="{ openCategory: '' }">
                <legend class="text-base font-semibold text-gray-800 mb-3">태그 목록</legend>
                <div class="space-y-2">
                    <!-- 프론트엔드 카테고리 -->
                    <div class="border-b border-gray-200 py-2">
                        <button type="button" @click="openCategory = (openCategory === 'frontend' ? '' : 'frontend')" class="w-full flex justify-between items-center text-sm font-medium text-gray-700">
                            <span>직무 태그</span>
                            <svg class="w-5 h-5 transition-transform" :class="{'rotate-180': openCategory === 'frontend'}" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                        </button>
                        <div x-show="openCategory === 'frontend'" x-transition class="pt-4 pl-2 space-y-2">
                            <!-- 스킬 태그 목록 -->
                            <div class="relative flex items-center gap-x-3"><input id="skill-react" type="checkbox" class="h-4 w-4 rounded border-gray-300"><label for="skill-react" class="text-sm text-gray-600">프론트 엔드</label></div>
                            <div class="relative flex items-center gap-x-3"><input id="skill-vue" type="checkbox" class="h-4 w-4 rounded border-gray-300"><label for="skill-vue" class="text-sm text-gray-600">백엔드</label></div>
                        </div>
                    </div>
                    <!-- 백엔드 카테고리 -->
                    <div class="border-b border-gray-200 py-2">
                        <button type="button" @click="openCategory = (openCategory === 'backend' ? '' : 'backend')" class="w-full flex justify-between items-center text-sm font-medium text-gray-700">
                            <span>기술 태그</span>
                            <svg class="w-5 h-5 transition-transform" :class="{'rotate-180': openCategory === 'backend'}" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                        </button>
                        <div x-show="openCategory === 'backend'" x-transition class="pt-4 pl-2 space-y-2">
                            {{#skillTagList}}
                                <div class="relative flex items-center gap-x-3">
                                    <div class="group grid size-5 grid-cols-1">
                                        <input
                                                id="skill-{{skillTagName}}"
                                                type="checkbox"
                                                class="col-start-1 row-start-1 appearance-none size-5 rounded-md border-2 border-gray-300 bg-white transition checked:border-indigo-600 checked:bg-indigo-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500">
                                        <svg class="pointer-events-none col-start-1 row-start-1 size-4 self-center justify-self-center stroke-white opacity-0 transition group-has-[:checked]:opacity-100" viewBox="0 0 14 14" fill="none">
                                            <path d="M3 8L6 11L11 3.5" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg>
                                    </div>
                                    <label for="skill-{{skillTagName}}" class="text-sm text-gray-600">{{skillTagName}}</label>
                                </div>
                            {{/skillTagList}}
                        </div>
                    </div>
                </div>
            </fieldset>

            <!-- 동작 버튼 -->
            <div class="pt-4 flex flex-col gap-3">
                <button type="submit" class="w-full rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500">
                    검색하기
                </button>
                <button type="reset" class="w-full rounded-md bg-white px-4 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
                    초기화
                </button>
            </div>
        </form>
    </aside>

    <section class="flex-1">

        <form action="/announce/search" method="get" class="mb-8">
            <div class="relative">
                <input
                        type="search"
                        name="keyword"
                        placeholder="검색어를 입력하세요"
                        class="w-full pl-4 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 focus:outline-none"
                >
                <button type="submit" class="absolute inset-y-0 right-0 flex items-center px-4 text-gray-500 hover:text-indigo-600 ">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
                    </svg>
                </button>
            </div>
        </form>

        <div class="flex flex-col gap-4">
            {{#announceList}}
            <div class="bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-shadow duration-300">
                <a href="/announcedetail/{{id}}" class="block">
                    <h4 class="text-xl font-semibold mb-2 text-gray-900 truncate">{{title}}</h4>
                    <p class="text-sm text-gray-500 mb-4">{{content}}</p>
                    <a href="/announcedetail/{{id}}" class="inline-block px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded hover:bg-indigo-500">
                        상세보기
                    </a>
                </a>
            </div>
            {{/announceList}}
            {{^announceList}}
                <div class="bg-white border border-gray-200 rounded-xl p-6">
                    <p class="text-gray-700 text-center">등록된 공고가 없습니다.</p>
                    {{#keyword}}
                        <p class="text-gray-700 text-center mt-4">검색한 키워드 : {{keyword}}</p>
                    {{/keyword}}
                </div>
            {{/announceList}}
        </div>
        <div class="mt-8 flex items-center justify-center gap-x-2">
            {{#previousPageNumber}}
                <a href="/?page={{previousPageNumber}}&size={{announceList.size}}" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-100">
                    이전
                </a>
            {{/previousPageNumber}}
            {{^previousPageNumber}}
                <span class="px-4 py-2 text-sm font-medium text-gray-400 bg-gray-200 border border-gray-200 rounded-lg cursor-not-allowed">
                    이전
                </span>
            {{/previousPageNumber}}

            {{#pageLinks}}
                {{#active}}
                    <a href="/?page={{displayNumber}}&size={{announceList.size}}" aria-current="page" class="px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-indigo-600 rounded-lg">
                        {{displayNumber}}
                    </a>
                {{/active}}
                {{^active}}
                    <a href="/?page={{displayNumber}}&size={{announceList.size}}" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-100">
                        {{displayNumber}}
                    </a>
                {{/active}}
            {{/pageLinks}}

            {{#nextPageNumber}}
                <a href="/?page={{nextPageNumber}}&size={{announceList.size}}" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-100">
                    다음
                </a>
            {{/nextPageNumber}}
            {{^nextPageNumber}}
                <span class="px-4 py-2 text-sm font-medium text-gray-400 bg-gray-200 border border-gray-200 rounded-lg cursor-not-allowed">
                    다음
                </span>
            {{/nextPageNumber}}
        </div>
    </section>
</main>

{{> layout/footer}}